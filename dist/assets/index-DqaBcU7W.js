import{j as e,m as E,b as y,a as h,c as x,d as W,e as P,T as R,C,A as O,f as z,R as F,B as I,g as _,X as k,Y as $,h as B,i as H,k as G,l as U,D as L,F as V,U as X,S as q}from"./vendor-DpVqAvqM.js";import{b as Y,g as K,a as u,B as Q,d as J,e as Z,R as ee}from"./react-CRiHVvSJ.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();var f={},D;function ae(){if(D)return f;D=1;var t=Y();return f.createRoot=t.createRoot,f.hydrateRoot=t.hydrateRoot,f}var te=ae();const se=K(te),re={cliente_id:"1",nombre_completo:"ARIEL GUILLERMO ONORE",empresa:"CN SERVICIOS INFORMATICOS",email:"a_onore@hotmail.com",telefono:"3516260063",direccion:"EDUARDO MALDONADO 1338",ciudad:"CORDOBA",pais:"ARGENTINA",notas:"NINGUNA",dias_alerta:7},oe={titulo:"PRUEBA",descripcion:"TAREA DE PRUEBA",fecha_vencimiento:"10/10/2025",estado:"INICIADA",cliente_id:"1",notas:""};function ne({children:t,type:o="button",className:a="",...r}){return e.jsx("button",{type:o,className:`px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition ${a}`,...r,children:t})}function M({className:t=""}){return e.jsx("div",{className:`animate-pulse bg-gray-300 rounded ${t}`})}function g({children:t,className:o="",...a}){return e.jsx("div",{className:`bg-white rounded shadow p-4 ${o}`,...a,children:t})}function N({children:t,className:o="",...a}){return e.jsx("div",{className:`mb-2 ${o}`,...a,children:t})}function w({children:t,className:o="",...a}){return e.jsx("h3",{className:`text-lg font-bold ${o}`,...a,children:t})}function j({children:t,className:o="",...a}){return e.jsx("div",{className:o,...a,children:t})}function p({title:t,value:o,icon:a,gradient:r,trend:s,subtitle:i}){return e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(g,{className:"border-0 shadow-lg shadow-slate-200/50 hover:shadow-xl hover:shadow-slate-300/50 transition-all duration-300 overflow-hidden group",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 ${r} opacity-10 rounded-full blur-3xl group-hover:opacity-20 transition-opacity duration-300`}),e.jsxs(j,{className:"p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 mb-1",children:t}),e.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:o}),i&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:i})]}),e.jsx("div",{className:`p-3 rounded-xl ${r} bg-opacity-10 group-hover:scale-110 transition-transform duration-300`,children:e.jsx(a,{className:`w-6 h-6 ${r.replace("bg-","text-").replace("to-","").split(" ")[0]}`})})]}),s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${s.type==="up"?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:s.value}),e.jsx("span",{className:"text-xs text-slate-500",children:s.label})]})]})]})})}function A({children:t,className:o="",color:a="blue",...r}){const s={blue:"bg-blue-100 text-blue-800",green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",gray:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold ${s[a]||s.blue} ${o}`,...r,children:t})}const ie={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},de=(t,o,a)=>{let r;const s=ie[t];return typeof s=="string"?r=s:o===1?r=s.one:r=s.other.replace("{{count}}",o.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"en "+r:"hace "+r:r},le={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},ce={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},me={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ue={date:y({formats:le,defaultWidth:"full"}),time:y({formats:ce,defaultWidth:"full"}),dateTime:y({formats:me,defaultWidth:"full"})},he={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},xe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},be=(t,o,a,r)=>o.getHours()!==1?xe[t]:he[t],fe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},pe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},ge={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},je={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},ve={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},ye={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Ne=(t,o)=>Number(t)+"º",we={ordinalNumber:Ne,era:h({values:fe,defaultWidth:"wide"}),quarter:h({values:pe,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:h({values:ge,defaultWidth:"wide"}),day:h({values:je,defaultWidth:"wide"}),dayPeriod:h({values:ve,defaultWidth:"wide",formattingValues:ye,defaultFormattingWidth:"wide"})},Pe=/^(\d+)(º)?/i,Ce=/\d+/i,De={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},Me={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},Ae={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Se={any:[/1/i,/2/i,/3/i,/4/i]},Ee={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Re={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Le={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},Te={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},We={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},Oe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},ze={ordinalNumber:W({matchPattern:Pe,parsePattern:Ce,valueCallback:function(t){return parseInt(t,10)}}),era:x({matchPatterns:De,defaultMatchWidth:"wide",parsePatterns:Me,defaultParseWidth:"any"}),quarter:x({matchPatterns:Ae,defaultMatchWidth:"wide",parsePatterns:Se,defaultParseWidth:"any",valueCallback:t=>t+1}),month:x({matchPatterns:Ee,defaultMatchWidth:"wide",parsePatterns:Re,defaultParseWidth:"any"}),day:x({matchPatterns:Le,defaultMatchWidth:"wide",parsePatterns:Te,defaultParseWidth:"any"}),dayPeriod:x({matchPatterns:We,defaultMatchWidth:"any",parsePatterns:Oe,defaultParseWidth:"any"})},Fe={code:"es",formatDistance:de,formatLong:ue,formatRelative:be,localize:we,match:ze,options:{weekStartsOn:1,firstWeekContainsDate:1}},T={name:"Usuario",getInfo:()=>({name:T.name})};function Ie({tareas:t,clientes:o}){const[a,r]=u.useState(7);u.useEffect(()=>{s()},[]);const s=async()=>{try{const n=await T.me();r(n.dias_alerta_global||7)}catch(n){console.error("Error cargando configuración:",n)}},i=n=>o.find(c=>c.id===n),l=t.filter(n=>{if(n.estado==="cobrada")return!1;const c=n.ultima_actualizacion||n.updated_date;return P(new Date,new Date(c))>=a});return e.jsxs(g,{className:"border-0 shadow-lg shadow-slate-200/50",children:[e.jsx(N,{className:"border-b border-slate-100 pb-4",children:e.jsxs(w,{className:"flex items-center gap-2 text-lg font-bold text-slate-900",children:[e.jsx(R,{className:"w-5 h-5 text-amber-500"}),"Alertas de Inactividad",e.jsxs(A,{variant:"outline",className:"ml-auto",children:[a," días configurados"]})]})}),e.jsx(j,{className:"p-4",children:l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(C,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"No hay tareas con alertas"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Las tareas inactivas por más de ",a," días aparecerán aquí"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"(Las tareas cobradas no generan alertas)"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.jsx(O,{children:l.map((n,c)=>{const m=i(n.cliente_id),b=n.ultima_actualizacion||n.updated_date,d=P(new Date,new Date(b));return e.jsxs(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:c*.05},className:"p-4 bg-amber-50 border border-amber-200 rounded-xl hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-slate-900",children:n.titulo}),e.jsx("p",{className:"text-sm text-slate-600",children:m==null?void 0:m.nombre_completo})]}),e.jsxs(A,{className:"bg-amber-500 text-white",children:[d," días"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx(C,{className:"w-3 h-3"}),"Última actualización: ",z(new Date(b),"d 'de' MMMM",{locale:Fe})]})]},n.id)})})})})]})}const S={iniciada:"#f59e0b",en_proceso:"#3b82f6",finalizada:"#10b981",cobrada:"#8b5cf6"},_e={iniciada:"Iniciadas",en_proceso:"En Proceso",finalizada:"Finalizadas",cobrada:"Cobradas"};function ke({tareas:t}){const o=Object.keys(S).map(a=>({name:_e[a],value:t.filter(r=>r.estado===a).length,color:S[a]}));return e.jsxs(g,{className:"border-0 shadow-lg shadow-slate-200/50",children:[e.jsx(N,{className:"border-b border-slate-100 pb-4",children:e.jsx(w,{className:"text-lg font-bold text-slate-900",children:"Tareas por Estado"})}),e.jsx(j,{className:"p-6",children:e.jsx(F,{width:"100%",height:280,children:e.jsxs(I,{data:o,children:[e.jsx(_,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),e.jsx(k,{dataKey:"name",tick:{fontSize:12,fill:"#64748b"}}),e.jsx($,{tick:{fontSize:12,fill:"#64748b"}}),e.jsx(B,{contentStyle:{backgroundColor:"white",border:"none",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.1)"}}),e.jsx(H,{dataKey:"value",radius:[8,8,0,0],children:o.map((a,r)=>e.jsx(G,{fill:a.color},`cell-${r}`))})]})})})]})}function $e({tareas:t,clientes:o}){const a=o.map(r=>{const s=t.filter(n=>n.cliente_id===r.id),i=s.filter(n=>n.estado==="cobrada").reduce((n,c)=>n+(c.monto||0),0),l=s.filter(n=>n.estado==="finalizada").reduce((n,c)=>n+(c.monto||0),0);return{...r,totalCobrado:i,totalPendiente:l,totalGeneral:i+l}}).sort((r,s)=>s.totalGeneral-r.totalGeneral).slice(0,5);return e.jsxs(g,{className:"border-0 shadow-lg shadow-slate-200/50",children:[e.jsx(N,{className:"border-b border-slate-100 pb-4",children:e.jsxs(w,{className:"flex items-center gap-2 text-lg font-bold text-slate-900",children:[e.jsx(U,{className:"w-5 h-5 text-blue-500"}),"Top Clientes"]})}),e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[a.map((r,s)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors duration-200",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center text-white font-bold shadow-md",children:s+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-slate-900",children:r.nombre_completo}),e.jsx("p",{className:"text-xs text-slate-500",children:r.empresa||"Sin empresa"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 text-emerald-600 font-bold",children:[e.jsx(L,{className:"w-4 h-4"}),r.totalGeneral.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.totalPendiente>0&&e.jsxs("p",{className:"text-xs text-amber-600",children:["$",r.totalPendiente.toLocaleString("es-ES",{minimumFractionDigits:2})," pendiente"]})]})]},r.id)),a.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-500 text-sm",children:"No hay datos de clientes"})})]})})]})}function Be(){const[t,o]=u.useState([]),[a,r]=u.useState([]),[s,i]=u.useState(!0);u.useEffect(()=>{l()},[]);const l=async()=>{i(!0),o(re),r(oe),i(!1)},n=a.filter(d=>d.estado==="cobrada").reduce((d,v)=>d+(v.monto||0),0),c=a.filter(d=>d.estado==="finalizada").reduce((d,v)=>d+(v.monto||0),0),m=a.filter(d=>d.estado!=="cobrada").length,b=()=>{window.print()};return s?e.jsx("div",{className:"p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx(M,{className:"h-12 w-64"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(d=>e.jsx(M,{className:"h-40"},d))})]})}):e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print-area, .print-area * {
            visibility: visible;
          }
          .print-area {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
          .no-print {
            display: none !important;
          }
          @page {
            margin: 2cm;
          }
        }
      `}),e.jsxs("div",{className:"max-w-7xl mx-auto print-area",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-slate-500",children:"Vista general de tu negocio"})]}),e.jsxs(ne,{onClick:b,className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white shadow-lg shadow-emerald-500/30 no-print",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Exportar a PDF"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(p,{title:"Total Clientes",value:t.length,icon:X,gradient:"bg-gradient-to-br from-blue-500 to-indigo-600",subtitle:"Clientes activos"}),e.jsx(p,{title:"Tareas Activas",value:m,icon:q,gradient:"bg-gradient-to-br from-amber-500 to-orange-600",subtitle:"Sin cobrar"}),e.jsx(p,{title:"Total Cobrado",value:`$${n.toLocaleString("es-ES",{minimumFractionDigits:2})}`,icon:L,gradient:"bg-gradient-to-br from-emerald-500 to-teal-600",subtitle:"Pagos recibidos"}),e.jsx(p,{title:"Por Cobrar",value:`$${c.toLocaleString("es-ES",{minimumFractionDigits:2})}`,icon:R,gradient:"bg-gradient-to-br from-red-500 to-pink-600",subtitle:"Trabajos finalizados"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ke,{tareas:a})}),e.jsx("div",{children:e.jsx($e,{tareas:a,clientes:t})})]}),e.jsx(Ie,{tareas:a,clientes:t})]})]})}function He(){return e.jsx(Q,{children:e.jsx(J,{children:e.jsx(Z,{path:"/",element:e.jsx(Be,{})})})})}se.createRoot(document.getElementById("root")).render(e.jsx(ee.StrictMode,{children:e.jsx(He,{})}));
